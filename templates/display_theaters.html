<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Theatres in Your Area</title>
    <link rel= "stylesheet" type= "text/css" href= "../static/css/chart.css">
    <link rel= "stylesheet" type= "text/css" href= "../static/css/style.css">
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js"></script>
    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js'></script>
  </head>
  <div class="backgroundTheatrePage">
    <div class="crowdyWrapper">
      <p class="title">Crowdy</p>
      <p class="subTitle">Here. Are. Your. Theaters.</p>
    </div>


    <body class="bodyDis">
      <div id = "map">

      </div>
      <div class="rightSide">
      {% for element in list %}

        <div class="theatreBox">
          <p><b></b>{{ element.name }} </p>
          <p id="address"><b>Address: </b>{{ element.address }} </p>

          <div class="shit">
            <!-- <a class="btn btn-info" class="open-modal" data-url=" {{ url_for('pop') }}">Popular times</a> -->
            </div>
        </div>
        <div id="chartID"></div>

        <!-- Button trigger modal -->
          <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
            Launch demo modal
          </button> -->

        <a href="/pop" data-toggle="modal" data-target="#exampleModal" class="test">Launch demo modal</a>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content" bg="#E6E6FA">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>

       <!--<p><b>Rating: </b>{{ element.rating }} </p><br>-->
       {% endfor %}
     </div>

     <div class="bottom">
       <p id="title2">Meet The Team</p>
       <div class="mojiWrapper">
         <div class="mojiBox">
            <img class="bit" src="https://i.imgur.com/Dcx53li.png" alt="">
            <p class = "name">Simone Chan</p>
            <p class="position">Back-End Developer</p>
         </div>

         <div class="mojiBox">
          <img class="bit" src="https://i.imgur.com/jUvFgfa.png" alt="">
          <p class = "name">Daniel Lobaton</p>
          <p class="position"> Project Manager</p>
         </div>

         <div class="mojiBox">
           <img class="bit" src="https://i.imgur.com/0FIPXl0.png" alt="">
           <p class = "name">Harsh Patel</p>
           <p class="position">Scrum Master</p>
           <p></p>
         </div>

         <div class="mojiBox">
           <img class="bit" src="https://i.imgur.com/O43ClW1.png" alt="">
           <p class = "name">Eduardo Graziano</p>
           <p class="position">Back-End Developer</p>
         </div>

         <div id = "lastbox" class="mojiBox">
           <img class="bit" src="https://i.imgur.com/ZpIiPlv.png" alt="">
           <p class = "name">Eric Roque</p>
           <p class="position">Front-End Developer</p>
           </div>
           <!-- <a href='logout'>Logout</a> -->
        </body>
        <!-- <img id="leftCornD" src="https://imgur.com/nmzMpNZ.png" alt=""> -->
        <!-- <img id="rightCornD" src="https://imgur.com/ls2WbKd.png" alt=""> -->
        <script>
         var locations = [];
         {% for element in list %}

           locations.push([ {{element.lat}}, {{element.lng}}, "{{ element.name}}" ]);
           // console.log({{element.name}});

         {% endfor %}
         function initMap(){
           var location = {lat:{{userLocationDict['latitude']}}, lng:{{userLocationDict['longitude']}}};

           var map = new google.maps.Map(document.getElementById("map"), {
             zoom: 12,
             center: location
           });


           var infowindow = new google.maps.InfoWindow();

           var marker, i;

           for (i = 0; i < locations.length; i++) {

             marker = new google.maps.Marker({
               position: new google.maps.LatLng(locations[i][0], locations[i][1]),
               map: map
             });

           google.maps.event.addListener(marker, 'click', (function(marker, i) {
             return function() {
               infowindow.setContent(locations[i][2]);
               infowindow.open(map, marker);
             }
           })(marker, i));
         }

         }
       </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBABVNXk90RVdvQqgDanDifw-bgMGeONI&callback=initMap"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>

        <script type="text/javascript">
        $('.test').on('click', function(e){
            $('#exampleModal').modal('show').find('.modal-content').load($(this).attr('href'));
          });
      </script>

</html>
